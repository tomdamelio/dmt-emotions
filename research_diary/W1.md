Sabado 30 de Agosto
--------------------
[x] Armar en `docs/` el readme del proyecto con el orden en que deben correrse.
[x] Guardar los archivos de datos viejos en `../data/old/`
[x] Guardar la data originar en `../data/original/`
[x] Pushear el proyecto en un nuevo repo (ahora esta en el repo de Tomi)

Domingo 31 de Agosto
--------------------
[x] Editar `preprocess_eda.py` para usar 15 segundos extra (20:15 min DMT, 10:15 min Reposo) para plots más limpios.
[x] Crear archivo `config.py` con todos los paths y datos de config del proyecto.
[x] Adaptar preprocess_eda.py para extraer todas las metricas de 
interes de EDA
[x] Hacer testeo exploratorio de la version actual de `preprocess_eda.py` en un nuevo script a guardarse en `./test`.
Este script debe testear las señales de EDA extraidas para el sujeto de prueba (S04). Para eso, es necesario primero  filtrar el dataframe guardado en el .csv para quitar la columna ´time´. Luego de eso, con `eda_plot()` puedo plotear los 4 archivos resultantes.

Comentario -> Parece que la extracción de la actividad de SMNA no esta resuelta en NueroKit2, y de hecho parece que cvxEDA podria tener mejoras (e.g con transformers o a partir de sumar un prior sparse. Pero indagar esto va mas alla de los objetivos de este trabajo, y voy a continuar con los datos extraidos como variables de NeuroKit2).

[x] Generalizar `preprocess_eda.py` para que sea `preprocess_phys.py`y
y obtener asi todos los features tambien de resp y ecg (ademas de eda).
[x] Crear `test_phys_preprocessing.py` para testear que los plots esten bien para las 3 medidas (con la generalizacion de `preprocess_eda.py` a `preprocess_phys.py`).
[x] Correr `python scripts/preprocess_phys.py` que me deberia preprocesar todos los particiapantes (TODOS y no solo los validos).

Lunes 15 de Septiembre
[x] Modificar `test_phys_preprocessing.py`para que al correrlo (por ahora solo para el S01) me permita anotar manualmente en consola / terminal las anotaciones que luego se reflejaran en el json (ver los cambios que hice en el chat de cursor a la derecha, para entener el proceso).


[x] En `preprocess_phys.py`, implementar el metodo `kbk_scr()` de biosppy como metodo extra / complementario sobre la señal de EDA. Esto nos dara 3 arrays (i.e. SCR onsets, SCR peaks and SCR amplitudes) que deben combinarse en un unico DataFrame y guardarse como un archivo extra al archivo de eda, agregandole el sufijo (`_kbk_scr`). Por ejemplo, si el archivo resultante de EDA de correr `preprocess_phys.py` es `S02_dmt_session2_high.csv`, este nuevo archivo complementario sera  `S02_dmt_session2_high_kbk_scr.csv`

[x]  En `preprocess_phys.py`, implementar exactamente lo mismo que hice en el paso anterior con `kbk_scr()` pero con la funcion `emotiphai_eda()` (que tambien devuelve 3 arrays de onsets, peaks y amplitudes). Del mismo modo, el archivo resultante podria llamarse (a modo de ejemplo) `S02_dmt_session2_high_kbk_scr_emotiphai_eda.csv`


[x] Finalmente,  en `preprocess_phys.py` guardar un cuarto archivo complementario de EDA. Esta vez, se imlementara el metodo `biosppy.signals.eda.cvx_decomposition()` como metodo extra / complementario sobre la señal de EDA. Esto nos dara 3 arrays (i.e. edr, smna, edl) que debe guardarse como un archivo extra al archivo de eda, agregandole el sufijo (`_cvx_decomposition`). El resto de las cuatro variables que devuelve cvx_decomposition (i.e. tonic_coeff, linear_drift, res, obj) no quiero qeu se guarden. En este proceso por ejemplo, si el archivo resultante de EDA de correr `preprocess_phys.py` es `S02_dmt_session2_high.csv`, este nuevo archivo complementario sera  `S02_dmt_session2_high_cvx_decomposition.csv`

[x] Agregar en `preprocess_phys.py` algun paso de validacion para corroborar que los lenghts de los archivos de kbk_scr, emotiphai_eda y cvx_decomposition tenga la misma dimensioanlidad (imprimir los lenghts de ambos archivos e incluir un assert de eso)

Por ahora tengo implementado en `preprocess_phys.py` para obtener los features de las 3 señales y ademas el emotiphai_eda y cvx_decomposition (kbk_scr lo borre por una cuestion de incompatibilidades de dependencias con numpu).
Recien chequee que los plots de `test_phys_preprocessing.py` me dan algo decente, asi que ahora dejo corriendo `preprocess_phys.py` para todos los participantes. `test_phys_preprocessing.py` todavia puede mejorarse, sobre todo tal vez se puede combinar la infom de emotiphai_eda con la info de cvx eda (todo junto en un mismo plot).
Ademas, tengo la idae de quedarme con la envolvente de SMNA como proxy de arousal (aunque tal vez el SCR extraido con el cxvEDA es suficiente)

[x] Quiero que en `test_phys_preprocessing.py`, al plot de cvxEDA le sumes los eventos extraido de "Emotiphai SCR". En concreto, quiero que en el plot de cvxEDA incluyas el `Onset` y el `Peak` como un punto en la serie temporal de cvxEDA. A su vez, representa `Amplitud` como una barra vertical qeu desciende desde el `Peak`. Tene en cuenta que el plot de cvxEDA esta en segundos mientras que el de Emotiphai tiene los timestamps en timepoints (sampling rate de 250Hz).

[x] Fijare si corrio bien `preprocess_phys.py` para todos los participantes


[ ]  Correr `test_phys_preprocessing.py` para ver archivo a archivo de cada participante si genera o no datos validos. Ir anotando este en algun archivo de logeo que luego `process_eda.py` tome como input para entender cuales son los archivos validos y cuales no. Comparar este logeo de archivos validos con las anotaciones manuales de Tomi a ver si coinciden

[ ] Adaptar `process_eda.py` para replicar figuara de EDA y HR de Tomi, pero con nueva forma de obtencion de los datos segun fueron guardados al correr `preprocess_eda.py`. Ya fui adaptandolo, sacando metricas de SMNA, etc, pero no me convencio para nada el resultado. Diego me propuso qeu si esta muy ruidoso puedo fitear un pilonomio a eso, pero no se.

[ ] Hacer espectrograma pero con los datos de EDA y ECG (dos figuras distitnas), a nivel exploratorio.

[ ] Con esto, hablarle a Enzo para avanzar con el paper